<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Maven概览-核心概念Maven是一个围绕POM文件（项目对象模型）的概念。 POM文件是源代码，测试代码，依赖（使用的外部JAR）等项目资源的XML表示.POM包含对所有这些资源的引用。POM文件应位于其所属项目的根目录下。这是一个说明Maven如何使用POM文件以及POM文件主要包含的内容的图：这些概念将在下面简要介绍以给你一个概览，然后在本教程后面的各自章节中有更详细的介绍。">
<meta property="og:type" content="article">
<meta property="og:title" content="Maven入门">
<meta property="og:url" content="http://yoursite.com/2017/07/06/Maven%E5%85%A5%E9%97%A8/index.html">
<meta property="og:site_name" content="अरण्य">
<meta property="og:description" content="Maven概览-核心概念Maven是一个围绕POM文件（项目对象模型）的概念。 POM文件是源代码，测试代码，依赖（使用的外部JAR）等项目资源的XML表示.POM包含对所有这些资源的引用。POM文件应位于其所属项目的根目录下。这是一个说明Maven如何使用POM文件以及POM文件主要包含的内容的图：这些概念将在下面简要介绍以给你一个概览，然后在本教程后面的各自章节中有更详细的介绍。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://yoursite.com/images/other/maven-overview-1.png">
<meta property="og:image" content="http://yoursite.com/images/other/maven-super-pom.png">
<meta property="og:image" content="http://yoursite.com/images/other/maven-repositories.png">
<meta property="article:published_time" content="2017-07-06T02:27:00.000Z">
<meta property="article:modified_time" content="2022-07-05T03:30:52.821Z">
<meta property="article:author" content="不识">
<meta property="article:tag" content="Maven">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/images/other/maven-overview-1.png">

<link rel="canonical" href="http://yoursite.com/2017/07/06/Maven%E5%85%A5%E9%97%A8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Maven入门 | अरण्य</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">अरण्य</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">此曰无诤，又名空静</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/06/Maven%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="不识">
      <meta itemprop="description" content="初心未终，此道可成">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="अरण्य">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Maven入门
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-07-06 10:27:00" itemprop="dateCreated datePublished" datetime="2017-07-06T10:27:00+08:00">2017-07-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-07-05 11:30:52" itemprop="dateModified" datetime="2022-07-05T11:30:52+08:00">2022-07-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Maven/" itemprop="url" rel="index"><span itemprop="name">Maven</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Maven/%E5%85%A5%E9%97%A8/" itemprop="url" rel="index"><span itemprop="name">入门</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Maven概览-核心概念"><a href="#Maven概览-核心概念" class="headerlink" title="Maven概览-核心概念"></a>Maven概览-核心概念</h1><p>Maven是一个围绕POM文件（项目对象模型）的概念。 POM文件是源代码，测试代码，依赖（使用的外部JAR）等项目资源的XML表示.POM包含对所有这些资源的引用。POM文件应位于其所属项目的根目录下。<br>这是一个说明Maven如何使用POM文件以及POM文件主要包含的内容的图：<br><img src="/images/other/maven-overview-1.png" alt="Maven核心概念"><br>这些概念将在下面简要介绍以给你一个概览，然后在本教程后面的各自章节中有更详细的介绍。</p>
<span id="more"></span>
<h2 id="POM文件"><a href="#POM文件" class="headerlink" title="POM文件"></a>POM文件</h2><p>当您执行Maven命令时，您可以给Maven一个POM文件来执行命令。然后，Maven将对POM中描述的资源执行命令。</p>
<h2 id="构建生命周期，阶段和目标"><a href="#构建生命周期，阶段和目标" class="headerlink" title="构建生命周期，阶段和目标"></a>构建生命周期，阶段和目标</h2><p>Maven的构建过程分为构建生命周期，阶段和目标。一个构建生命周期包含一系列的构建阶段，每个构建阶段由一系列目标组成。当你运行Maven时，你传递一个命令到Maven。这个命令就是构建生命周期，阶段或目标的名称。如果执行一个生命周期，则这个生命周期中的所有构建阶段都会被执行。如果请求执行构建阶段，则在预定义的构建阶段序列之前的所有构建阶段都将被执行。</p>
<h2 id="依赖和仓库"><a href="#依赖和仓库" class="headerlink" title="依赖和仓库"></a>依赖和仓库</h2><p>Maven首先执行的目标之一就是检查项目所需的依赖项。依赖是项目使用的外部JAR文件（Java库）。如果在Maven本地仓库库中找不到依赖项，Maven会从Maven中央仓库中下载它们，并将它们放在本地仓库中。本地仓库只是计算机硬盘上的一个目录。如果你想的话，您自己可以指定本地仓库的位置。您还可以指定要用于下载依赖远程仓库。所有这些将在本教程的后面更详细地解释。</p>
<h2 id="构建插件"><a href="#构建插件" class="headerlink" title="构建插件"></a>构建插件</h2><p>构建插件用于在构建阶段插入额外的目标。如果您需要为您的项目执行一系列不涵盖在标准Maven构建阶段和目标的操作，则可以向POM文件添加一个插件。Maven有一些可以使用的标准插件，如果需要，还可以使用Java实现自己的插件。</p>
<h2 id="构建配置文件"><a href="#构建配置文件" class="headerlink" title="构建配置文件"></a>构建配置文件</h2><p>如果您需要以不同的方式构建项目，则使用构建配置文件。例如，您可能需要为您的本地计算机构建项目，以进行开发和测试。并且您也可能需要构建它来部署在您的生产环境中。这两个版本可能会有所不同。要启用不同的构建，您可以向POM文件添加不同的构建配置文件。执行Maven时，您可以判断要使用的构建配置文件。</p>
<h1 id="Maven-vs-Ant"><a href="#Maven-vs-Ant" class="headerlink" title="Maven vs. Ant"></a>Maven vs. Ant</h1><p>Ant是Apache的另一个流行的构建工具。如果你习惯Ant，而你正在尝试学习Maven，你会注意到两个项目的方法有所不同。<br>Ant使用命令式方法，这意味着您在Ant构建文件中指定Ant应该采取什么动作。您可以指定一个低级操作，如复制文件，编译代码等。您可以指定操作，还可以指定执行操作的顺序。 Ant没有默认目录布局。<br>Maven使用更具声明性的方法，这意味着您在Maven POM文件中指定要构建什么，而不是如何去构建它。 POM文件描述您的项目资源 - 而不是如何构建它。相反，Ant文件描述如何构建项目。在Maven中，如何构建项目是在<a href="#Maven%E6%9E%84%E5%BB%BA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%8C%E9%98%B6%E6%AE%B5%E5%92%8C%E7%9B%AE%E6%A0%87">Maven构建生命周期，阶段和目标</a>中预先定义的。</p>
<h1 id="Maven-POM文件"><a href="#Maven-POM文件" class="headerlink" title="Maven POM文件"></a>Maven POM文件</h1><p>Maven POM文件（项目对象模型）是描述项目资源的XML文件。这包括源代码，测试源等所在的目录，你的项目有什么外部依赖（JAR文件）等等。 </p>
<p>POM文件描述了要构建的内容，但最常见的不是如何构建它。如何构建它是由Maven构建阶段和目标。如果需要，您可以将自定义操作（目标）插入到Maven构建阶段。</p>
<p>每个项目都有一个POM文件。POM文件名为pom.xml，应位于项目的根目录中。一个项目分为几个子项目的，它通常将有一个父项目的POM文件，并且每个子项目都有一个POM文件。这种结构允许整个项目一个步构建，或者任何一个子项目要单独构建。</p>
<p>在本节的其余部分中，我将描述POM文件中最重要的部分。有关POM文件的完整参考，<a href="#">Post not found: 《Maven官方文档》（三）POM参考</a>_</p>
<p>这是一个最小的POM文件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0</span></span></span><br><span class="line"><span class="string"><span class="tag">                      http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.jenkov<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>java-web-crawler<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>modelVersion元素设置您正在使用的POM模型的版本。使用与你正在使用的Maven版本相匹配的值。版本4.0.0匹配Maven 2和3版本。</p>
<p>groupId元素是组织或项目（例如开源项目）的唯一ID。通常，您将使用类似于项目的根Java包名称的groupId。例如，对于我的Java Web Crawler项目，我可以选择groupId为com.jenkov。如果该项目是一个具有许多独立贡献者的开源项目，或许使用与该项目相关的groupId更有意义，而不是与我公司相关的groupId。因此，可以使用com.javawebcrawler。</p>
<p>groupId不必一定是Java包名称，并且不必在ID中使用.符号（点符号）来分割单词。但是，如果这样做的话，项目将位于与组ID匹配的目录结构下的Maven仓库中。每个.被替换为目录分隔符，因此每个单词都表示一个目录。这样groupId com.jenkov将位于名为MAVEN_REPO &#x2F; com &#x2F; jenkov的目录中。目录名称的MAVEN_REPO部分将替换为Maven仓库的目录路径。</p>
<p>artifactId元素包含您正在构建的项目的名称。在我的Java Web Crawler项目的情况下，artifactId将是java-web-crawler。artifactId用作Maven仓库中groupId目录下的子目录的名称。artifactId也用作构建项目时生成的JAR文件的名称的一部分。构建过程的输出（即构建结果）在Maven中称为artifact。大多数情况下，它是一个JAR，WAR或EAR文件，但它也可以是别的东西。 </p>
<p>versionId元素包含项目的版本号。如果您的项目已经以不同的版本发布，例如开放源代码API，那么版本生成是有用的。这样您的项目的用户可以参考您的项目的特定版本。版本号用作artifactId目录下的子目录的名称。版本号也用作构建的artifact名称的一部分。</p>
<p>上述groupId，artifactId和version元素将导致一个JAR文件被构建并放在的Maven本地仓库中，位于以下路径（目录和文件名）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MAVEN_REPO/com/jenkov/java-web-crawler/1.0.0/java-web-crawler-1.0.0.jar</span><br></pre></td></tr></table></figure>

<p>如果您的项目使用Maven目录结构，并且您的项目没有外部依赖关系，那么上述最小的POM文件就是你构建项目所需要的全部。</p>
<p>如果您的项目不遵循标准目录结构，具有外部依赖关系，或者在构建期间需要特殊操作，则需要向POM文件添加更多元素。这些元素列在Maven POM参考中（参见上面的链接）。</p>
<p>一般来说，您可以在POM中指定很多东西，为Maven提供有关如何构建项目的更多详细信息。有关可以指定的内容的更多信息，请参阅Maven POM参考。</p>
<h2 id="超级POM"><a href="#超级POM" class="headerlink" title="超级POM"></a>超级POM</h2><p>所有Maven POM文件都继承自超级POM。如果没有指定超级POM，则POM文件将从基本POM继承。以下是图示：<br><img src="/images/other/maven-super-pom.png" alt="超级POM和POM继承。"></p>
<p>您可以使POM文件明确地继承另一个POM文件。这样，您可以通过其通用的超级POM更改所有继承的POM的设置。您可以在POM文件的顶部指定超级POM，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><br><span class="line">         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0</span><br><span class="line">                      http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">    </span><br><span class="line">        &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;my-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.0&lt;/version&gt;</span><br><span class="line">        &lt;relativePath&gt;../my-parent&lt;/relativePath&gt;</span><br><span class="line">        &lt;/parent&gt;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    &lt;artifactId&gt;my-project&lt;/artifactId&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>
<p>继承的POM文件可以覆盖超级POM的设置。只需在继承的POM文件中指定新设置即可。</p>
<p>POM继承也在Maven POM引用中有更详细的介绍。</p>
<h2 id="有效POM"><a href="#有效POM" class="headerlink" title="有效POM"></a>有效POM</h2><p>使用所有这些POM继承，可能很难知道当Maven执行时，总体POM文件的样子。总POM文件（所有继承的结果）称为有效POM。您可以使用以下命令让Maven向您显示有效的POM：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn help:effective-pom</span><br></pre></td></tr></table></figure>
<p>该命令将使Maven将有效的POM写入命令行提示符。</p>
<h1 id="Maven设置文件"><a href="#Maven设置文件" class="headerlink" title="Maven设置文件"></a>Maven设置文件</h1><p>Maven有两个设置文件。在设置文件中，您可以在所有Maven POM文件为Maven进行配置设置。例如，您可以配置：</p>
<ul>
<li>本地仓库位置</li>
<li>活动构建配置文件</li>
<li>等等</li>
</ul>
<p>设置文件名为settings.xml。两个设置文件位于：</p>
<ul>
<li>Maven安装目录：$M2_HOME&#x2F;conf&#x2F;settings.xml </li>
<li>用户的主目录：${user.home}&#x2F;.m2&#x2F;settings.xml</li>
</ul>
<p>这两个文件都是可选的。如果两个文件都存在，则用户主文件设置文件中的值将覆盖Maven安装设置文件中的值。</p>
<p>您可以在<a href="#">Post not found: 《Maven官方文档》（二）设置参考</a> _中了解有关Maven设置文件的更多信息。</p>
<h1 id="Maven目录结构"><a href="#Maven目录结构" class="headerlink" title="Maven目录结构"></a>Maven目录结构</h1><p>Maven有一个标准的目录结构。如果您按照该项目的目录结构，您不需要在POM文件中指定源代码，测试代码等的目录。</p>
<p>您可以在<a target="_blank" rel="noopener" href="http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html">Maven标准目录布局简介</a>中看到完整的目录布局。</p>
<p>以下是最重要的目录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- src</span><br><span class="line">  - main</span><br><span class="line">    - java</span><br><span class="line">    - resources</span><br><span class="line">    - webapp</span><br><span class="line">  - test</span><br><span class="line">    - java</span><br><span class="line">    - resources</span><br><span class="line"></span><br><span class="line">- target</span><br></pre></td></tr></table></figure>
<p>src目录是源代码和测试代码的根目录。main 目录是与应用程序本身相关的源代码的根目录（不是测试代码）。test 目录包含测试源代码。 main和test下的java目录包含应用程序本身的Java代码（主要内容）和测试的Java代码（被测试）。<br>资源目录包含项目所需的其他资源。这可以是用于应用程序国际化的属性文件，或其他内容。</p>
<p>如果您的项目是Web应用程序，则webapp目录包含您的Java Web应用程序。webapp目录将是Web应用程序的根目录。因此，webapp目录包含WEB-INF目录等</p>
<p>target目录由Maven创建。它包含由Maven生成的所有编译的类，JAR文件等。执行cleang构建阶段时，将清除目标目录。</p>
<h1 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h1><h2 id="外部依赖"><a href="#外部依赖" class="headerlink" title="外部依赖"></a>外部依赖</h2><p>Maven中的外部依赖是一个不在Maven仓库（既不在本地仓库，也不在中央仓库，远程仓库）中的依赖（JAR文件）。它可能位于本地硬盘上的某个位置，例如位于webapp的lib目录或其他位置。因此，“外部”一词意味着在Maven仓库系统的外部 - 而不仅仅是项目外部。大多数依赖都在在项目外部，但在仓库系统外部（不在仓库中）的很少。</p>
<p>你可以在像这样配置外部依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mydependency<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mydependency<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span>$&#123;basedir&#125;\war\WEB-INF\lib\mydependency.jar<span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>groupId和artifactId都设置为依赖的名称。也就是使用的API的名称。scope 元素值设置为system。 systemPath元素设置为指向包含依赖关系的JAR文件的位置。$ {basedir}指向POM所在的目录。该路径的其余部分是是相对目录的位置。</p>
<h2 id="快照依赖"><a href="#快照依赖" class="headerlink" title="快照依赖"></a>快照依赖</h2><p>快照依赖关系是正处在开发阶段的依赖（JAR文件）。相比经常更新版本号来获取最新的版本，你可以依赖于项目的快照版本。快照版本会为每次构建下载到你的本地仓库中，即使在你的本地仓库中一个匹配的快照版本已经存在。始终下载快照依赖确保您在本地仓库中始终拥有最新版本，以用于每次构建。<br>你可以通过将-SNAPSHOT附加到POM下的version元素（您也可以设置groupId和artifactId的地方），告诉Maven您的项目是一个快照版本。这是一个version元素示例：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意版本号后附加的-SNAPSHOT。</p>
<p>你也可以通过在配置依赖关系后在版本号之后附加-SNAPSHOT来完成设置依赖一个快照版本。下面是示例</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.jenkov<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>java-web-crawler<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>版本号附加的-SNAPSHOT告诉Maven这是一个快照版本。</p>
<p>您可以配置Maven在Maven设置文件中下载快照依赖关系的频率。</p>
<h1 id="Maven仓库"><a href="#Maven仓库" class="headerlink" title="Maven仓库"></a>Maven仓库</h1><p>Maven仓库是具有额外元数据的打包JAR文件的目录。元数据是描述JAR文件所属项目的POM文件，包括每个打包JAR的外部依赖关系。正是这个元数据使Maven能够递归地下载依赖的依赖，直到整个依赖关系树下载并放入本地存储库中。</p>
<p>Maven仓库在Maven<a target="_blank" rel="noopener" href="http://maven.apache.org/guides/introduction/introduction-to-repositories.html">“仓库简介”</a>中有更详细的介绍，但这里是一个简要的概述。</p>
<p>Maven有三种类型的仓库：</p>
<ul>
<li>本地仓库</li>
<li>中央仓库</li>
<li>远程仓库</li>
</ul>
<p>Maven在上述顺序中搜索这些仓库中的依赖关系。首先在本地仓库中搜索，然后在中央仓库中，如果在POM中有指定，最后在远程仓库中。</p>
<p><img src="/images/other/maven-repositories.png" alt="Maven仓库类型和位置"></p>
<h2 id="本地仓库"><a href="#本地仓库" class="headerlink" title="本地仓库"></a>本地仓库</h2><p>本地仓库是开发人员计算机上的目录。该仓库将包含Maven下载的所有依赖项。相同的Maven存储库通常用于多个不同的项目。因此，Maven只需要下载依赖关系，即使多个项目依赖于它们（例如Junit）。</p>
<p>您也可以使用mvn install命令，在本地仓库中构建并安装自己的项目。这样，您的其他项目可以将您自己的项目的打包JAR文件作为外部依赖，将它们指定为Maven POM文件中的外部依赖项。</p>
<p>默认情况下，Maven将本地存储库放在本地计算机上的用户主目录中。但是，您可以通过设置Maven设置文件中的目录来更改本地仓库的位置。您的Maven设置文件也位于user-home&#x2F;.m2目录中，文件名为settings.xml。以下是为本地仓库指定其他位置的方法：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">localRepository</span>&gt;</span></span><br><span class="line">        d:\data\java\products\maven\repository</span><br><span class="line">    <span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="中央仓库"><a href="#中央仓库" class="headerlink" title="中央仓库"></a>中央仓库</h2><p>Maven中央仓库是由Maven社区提供的一个存储库。默认情况下，如果本地仓库中找不到，Maven在此中央仓库中查找所需的任何依赖。 Maven然后将这些依赖下载到您的本地仓库。您无需特殊的配置来访问中央仓库。</p>
<h2 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h2><p>远程仓库是Web服务器上的仓库，Maven可以从其中下载依赖，就像中央仓库一样。远程仓库可以位于互联网上的任何地方，也可以位于本地网络内。</p>
<p>远程仓库通常用于托管您组织内部的项目，这些项目由多个项目共享。例如，可以在多个内部项目中使用通用的安全项目。这个安全项目不应该被外部世界访问，因此不应该被托管在公共的Maven中央仓库中。相反，它可以托管在内部远程仓库。  </p>
<p>在远程仓库中找到的依赖也由Maven下载并放入本地仓库。</p>
<p>您可以在POM文件中配置远程仓库。将以下XML元素放在&lt;dependencies&gt;元素之后：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">id</span>&gt;</span>jenkov.code<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.jenkov.com/maven2/lib<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="Maven构建生命周期，阶段和目标"><a href="#Maven构建生命周期，阶段和目标" class="headerlink" title="Maven构建生命周期，阶段和目标"></a>Maven构建生命周期，阶段和目标</h1><p>当Maven构建一个软件项目时，它遵循构建生命周期。构建生命周期分为构建阶段，构建阶段分为构建目标。Maven构建生命周期，构建阶段和目标在<a href="#">Post not found: 《《Maven官方文档》（二）构建生命周期介绍</a> _中有更详细的描述，但在这里我将给您一个快速的概述。</p>
<h2 id="构建生命周期"><a href="#构建生命周期" class="headerlink" title="构建生命周期"></a>构建生命周期</h2><p>Maven有三个内置生命周期，它们是</p>
<ol>
<li><strong>default</strong></li>
<li><strong>clean</strong></li>
<li><strong>site</strong></li>
</ol>
<p>这些构建生命周期中的每一个都处理构建软件项目的不同方面。因此，这些构建生命周期中的每一个彼此独立地执行。您可以让Maven执行多个构建生命周期，但它们将按顺序执行，彼此分开，就好像已经执行了两个单独的Maven命令一样。<br>default生命周期处理与编译和打包项目相关的所有内容。clean的生命周期处理与从输出目录中删除临时文件相关的所有内容，包括生成的源文件，编译的类，以前的JAR文件等。site生命周期处理与为您的项目生成文档相关的所有内容。事实上，site可以生成一个完整的网站，其中包含您项目的文档。</p>
<h2 id="构建阶段"><a href="#构建阶段" class="headerlink" title="构建阶段"></a>构建阶段</h2><p>每个构建生命周期分为一系列构建阶段，构建阶段再次细分为目标。因此，总体构建过程是一系列的构建生命周期，构建阶段和目标。</p>
<p>您可以执行整个构建生命周期如clean或site，或者一个构建阶段如install，这是default构建生命周期的一部分，或一个构建目标，如 dependency:copy-dependencies。注意：您不能直接执行default生命周期。您必须在default生命周期内指定构建阶段或目标。</p>
<p>当你执行一个构建阶段，在这个标准构建阶段序列中所有之前的构建阶段都会被执行。因此，执行install构建阶段实际意味着执行在install阶段之前所有构建阶段，然后再执行install阶段。</p>
<p>default的生命周期是最有意思的，因为它建立代码。由于您无法直接执行default生命周期，因此您需要执行deafault生命周期中的构建阶段或目标。</p>
<p>deafault生命周期有一个广泛的构建阶段和目标序列，但这里不描述。最常用的构建阶段是：</p>
<table>
<thead>
<tr>
<th>构建阶段</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>validate</td>
<td>验证项目是否正确，是否提供了所有必要的信息。这也确保了依赖被下载。</td>
</tr>
<tr>
<td>compile</td>
<td>编译项目源代码</td>
</tr>
<tr>
<td>test</td>
<td>使用合适的单元测试框架测试编译的源代码。这些测试不应该要求代码被打包或部署</td>
</tr>
<tr>
<td>package</td>
<td>编译代码并将其打包成可分发格式，如JAR。</td>
</tr>
<tr>
<td>install</td>
<td>将软件包安装到本地仓库中，以作为本地其他项目的依赖使用</td>
</tr>
<tr>
<td>deploy</td>
<td>将最终软件包复制到远程仓库，以与其他开发人员和项目共享。</td>
</tr>
</tbody></table>
<p>通过将其名称传递给mvn命令来执行其中一个构建阶段。这是一个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn package</span><br></pre></td></tr></table></figure>
<p>此示例执行package构建阶段，也执行在此阶段在Maven预定义构建阶段序列之前所有的阶段。</p>
<p>如果标准的Maven构建阶段和目标不足以构建项目，则可以创建Maven插件以添加所需的额外构建功能。</p>
<h2 id="构建目标"><a href="#构建目标" class="headerlink" title="构建目标"></a>构建目标</h2><p>构建目标是Maven构建过程中最精细的步骤。一个目标可以绑定到一个或多个构建阶段，或者根本没有。如果目标没有绑定到任何构建阶段，则只能通过将目标名称传递给mvn命令来执行。如果一个目标被绑定到多个构建阶段，那么该目标将在每个构建阶段被执行。</p>
<h1 id="Maven构建配置"><a href="#Maven构建配置" class="headerlink" title="Maven构建配置"></a>Maven构建配置</h1><p>Maven构建配置使您能够使用不同的配置构建项目。相比创建两个单独的POM文件，您可以只需指定一个带有不同构建配置的profile，并在需要时使用此构建配置文件构建项目。</p>
<p>您可以在<a target="_blank" rel="noopener" href="http://maven.apache.org/pom.html#Profiles">“Profile”</a>下的Maven POM参考资料中阅读有关构建配置文件的完整故事。这里我会给你一个快速的概述。</p>
<p>Maven配置文件指定在POM文件中，在profiles元素内。每个构建配置文件嵌套在profile元素中。这有一个例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.jenkov.crawler<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>java-web-crawler<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>test<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">activation</span>&gt;</span>...<span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">build</span>&gt;</span>...<span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">modules</span>&gt;</span>...<span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">repositories</span>&gt;</span>...<span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span>...<span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span>...<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">reporting</span>&gt;</span>...<span class="tag">&lt;/<span class="name">reporting</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span>...<span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span>...<span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>构建配置文件描述在该构建配置文件下执行时应对POM文件进行哪些更改。这可能会更改要使用的应用程序配置文件等。配置文件元素中的元素将覆盖POM中具有相同名称的元素的值。</p>
<p>在profile元素内可以看到activation元素。该元素描述触发此构建配置文件被使用的条件。选择执行那个profile的一个方式在setting.xml文件中。这里你可以设置激活的profile。另一种方法是将-P profile-name添加到Maven命令行。有关详细信息，请参阅配置文件文档。</p>
<h1 id="Maven插件"><a href="#Maven插件" class="headerlink" title="Maven插件"></a>Maven插件</h1><p>Maven插件使您能够将自己的操作添加到构建过程中。您可以通过创建一个简单的Java类来继承一个特殊的Maven类，然后为该项目创建一个POM。该插件应该位于其自己的项目中。</p>
<h1 id="Maven命令"><a href="#Maven命令" class="headerlink" title="Maven命令"></a>Maven命令</h1><p>Maven包含一系列你可以执行的命令。Maven命令是构建生命周期，构建阶段和构建目标的混合，因此可能会有点混乱。因此，我将在本教程中描述常见的Maven命令，并解释其正在执行的构建生命周期，构建阶段和构建目标。</p>
<h2 id="Maven命令结构"><a href="#Maven命令结构" class="headerlink" title="Maven命令结构"></a>Maven命令结构</h2><p>一个Maven命令包含这两个元素</p>
<ul>
<li>mvn</li>
<li>一个或多个构建周期，构建阶段或构建目标</li>
</ul>
<p>这是一个Maven命令示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean</span><br></pre></td></tr></table></figure>
<p>该命令由执行Maven的mvn命令和名为clean的构建生命周期组成。<br>这是另一个Maven命令示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean install</span><br></pre></td></tr></table></figure>
<p>这个maven命令执行clean构建生命周期和default生命周期中的install构建阶段。</p>
<p>您可能会想知道如何看待构建生命周期，构建阶段和构建目标之间的区别。稍后会说明。</p>
<h2 id="构建生命周期，阶段和目标-1"><a href="#构建生命周期，阶段和目标-1" class="headerlink" title="构建生命周期，阶段和目标"></a>构建生命周期，阶段和目标</h2><p>如关于构建生命周期，构建阶段和构建目标的部分中的介绍中提到的，Maven包含三个主要的构建生命周期：</p>
<ul>
<li>clean</li>
<li>default</li>
<li>site</li>
</ul>
<p>在每个构建生命周期内都有构建阶段，每个构建阶段都有构建目标。      </p>
<p>您可以执行构建生命周期，构建阶段或构建目标。当执行构建生命周期时，执行了构建生命周期内执行所有构建阶段（以及构建目标）。</p>
<p>执行构建阶段时，会执行构建阶段内执行所有的构建目标。 Maven还执行了构建生命周期中的希望的构建阶段之前所有的构建阶段。</p>
<p>Buid目标被分配到一个或多个buid阶段。执行构建阶段时，构建阶段的所有目标也是如此。您也可以直接执行构建目标。</p>
<h2 id="执行生命周期，阶段和目标"><a href="#执行生命周期，阶段和目标" class="headerlink" title="执行生命周期，阶段和目标"></a>执行生命周期，阶段和目标</h2><p>运行mvn命令时，可以传递一个或多个参数。这些参数指定构建生命周期，构建阶段或构建目标。例如，要执行clean构建生命周期，请执行以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean</span><br></pre></td></tr></table></figure>
<p>要执行站点构建生命周期，请执行以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn site</span><br></pre></td></tr></table></figure>
<h1 id="执行Default生命周期"><a href="#执行Default生命周期" class="headerlink" title="执行Default生命周期"></a>执行Default生命周期</h1><p>default的生命周期是生成，编译，打包等你的源代码的构建生命周期。</p>
<p>您无法像clean或site一样直接执行default构建生命周期。相反，您必须在default构建生命周期内执行特定的构建阶段。</p>
<h1 id="执行构建阶段"><a href="#执行构建阶段" class="headerlink" title="执行构建阶段"></a>执行构建阶段</h1><p>通过将构建阶段的名称传递给Maven命令，可以在构建生命周期内执行构建阶段。这里有几个构建阶段命令示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mvn pre-clean</span><br><span class="line"></span><br><span class="line">mvn compile</span><br><span class="line">    </span><br><span class="line">mvn package</span><br></pre></td></tr></table></figure>
<p>Maven会查找指定的构建阶段所属的构建生命周期，因此您不需要明确指定构建阶段所属的构建生命周期。</p>
<h1 id="Maven原型"><a href="#Maven原型" class="headerlink" title="Maven原型"></a>Maven原型</h1><p>Maven原型是可以为您的Maven生成的项目模板。换句话说，当您开始一个新项目时，您可以使用Maven为该项目生成一个模板。在Maven中，一个模板被称为原型（archetype）。因此，每个Maven原型对应于Maven可以生成的项目模板。</p>
<h2 id="可用的Maven原型"><a href="#可用的Maven原型" class="headerlink" title="可用的Maven原型"></a>可用的Maven原型</h2><p>Maven包含很多原型，所以这个Maven原型教程将只显示一些最常用的原型。要查看Maven原型的完整列表，只需运行以下命令即可：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn archetype:generate</span><br></pre></td></tr></table></figure>
<p>该命令实际上是为您生成一个Maven原型，但是由于您没有在命令中指定要构建的原型，Maven将会将其所有可用的原型输出到命令提示符。最后，Maven会询问你生成哪一个Maven原型。如果您知道要生成的原型的编号，则可以在命令提示符中键入数字，然后按Enter键。</p>
<p>该列表包含超过1.300个Maven原型，因此找到所需的原型并不是那么容易。看看可用的Maven原型列表，您可以将输出管道输入到一个文件中，然后打开该文件。Notepad++ 等等。您可以使用此Maven命令将可用的Maven原型管理到文件中：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn archetype:generate &gt; archetypes.txt</span><br></pre></td></tr></table></figure>

<p>您可能需要在要求您输入原型号码的地方取消该命令。您可以使用CTRL-C在Windows上执行此操作。原型仍将写入文件。</p>
<h2 id="命名原型"><a href="#命名原型" class="headerlink" title="命名原型"></a>命名原型</h2><p>Maven包含一组您可以创建的命名原型。我将在以下部分中列出其中的几个原型。</p>
<h3 id="Eclipse"><a href="#Eclipse" class="headerlink" title="Eclipse"></a>Eclipse</h3><p>有一个Maven原型可以生成一个新的Java项目，包括Eclipse IDE的文件。您可以使用此Maven命令生成该原型：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn eclipse:eclipse</span><br></pre></td></tr></table></figure>
<p>在生成此Maven原型之前，您需要在要生成原型的项目根目录中有一个POM文件。</p>
<h3 id="IDEA原型"><a href="#IDEA原型" class="headerlink" title="IDEA原型"></a>IDEA原型</h3><p>与Eclipse原型类似，Maven包含一个IntelliJ IDEA原型。您可以使用此Maven命令生成IDEA原型：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn idea:idea</span><br></pre></td></tr></table></figure>
<h1 id="Maven单元测试报告"><a href="#Maven单元测试报告" class="headerlink" title="Maven单元测试报告"></a>Maven单元测试报告</h1><p>Maven可以以HTML形式生成单元测试报告。 Maven通过运行单元测试并记录单元测试的结果来做到这一点。然后Maven从单元测试结果生成一个HTML报告。</p>
<p>使用Maven生成单元测试报告可以在构建过程中看到哪些单元测试失败。特别是如果构建很大并且需要很长时间，那么因为在开发过程中您可能不会在IDE内部运行所有的单元测试。您只能运行与您所做更改相关的单元测试。然后，要检查项目中的所有内容是否仍然有效，您可以告诉Maven运行单元测试并生成单元测试报告。然后，您可以阅读报告，查看在构建期间是否有任何单元测试失败。</p>
<p>Maven单元测试报告是一个HTML文件。这意味着如果您需要与其他开发人员共享，则可将其复制到服务器。</p>
<h2 id="Maven-Surefire插件"><a href="#Maven-Surefire插件" class="headerlink" title="Maven Surefire插件"></a>Maven Surefire插件</h2><p>Maven单元测试报告由Maven Surefire插件生成。因此，单位测试报告也有时被称为Surefire 报告。</p>
<h2 id="生成一个单元测试报告"><a href="#生成一个单元测试报告" class="headerlink" title="生成一个单元测试报告"></a>生成一个单元测试报告</h2><p>您使用以下Maven命令生成一个Maven的单元测试报告（Surefire单元测试报告）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn surefire-report:report</span><br></pre></td></tr></table></figure>
<p>生成的单元测试报告可以在target&#x2F;site目录中找到。单元测试报告名为surefire-report.html。因此，单元测试报告的路径是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">your-project/target/site/surefire-report.html</span><br></pre></td></tr></table></figure>

<h2 id="跳过测试"><a href="#跳过测试" class="headerlink" title="跳过测试"></a>跳过测试</h2><p>有时您可能希望Maven生成单元测试报告，而不再重新运行所有单元测试。<br>您可能只想使用上次运行的结果。你可以使用以下命令让Maven生成单元测试报告，而无需重新运行单元测试：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn surefire-report:report-only</span><br></pre></td></tr></table></figure>
<p>此命令仅生成单元测试报告。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Maven/" rel="tag"># Maven</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2017/07/04/%E3%80%8AMaven%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E3%80%8B%EF%BC%88%E4%BA%8C%EF%BC%89%E6%9E%84%E5%BB%BA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%BB%8B%E7%BB%8D/" rel="prev" title="《Maven官方文档》（二）构建生命周期介绍">
      <i class="fa fa-chevron-left"></i> 《Maven官方文档》（二）构建生命周期介绍
    </a></div>
      <div class="post-nav-item">
    <a href="/2017/07/07/%E3%80%8AMaven%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E3%80%8B%EF%BC%88%E4%B8%89%EF%BC%89%E6%9E%84%E5%BB%BA%E9%85%8D%E7%BD%AE%E4%BB%8B%E7%BB%8D/" rel="next" title="《Maven官方文档》（三）构建配置介绍">
      《Maven官方文档》（三）构建配置介绍 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Maven%E6%A6%82%E8%A7%88-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="nav-number">1.</span> <span class="nav-text">Maven概览-核心概念</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#POM%E6%96%87%E4%BB%B6"><span class="nav-number">1.1.</span> <span class="nav-text">POM文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%8C%E9%98%B6%E6%AE%B5%E5%92%8C%E7%9B%AE%E6%A0%87"><span class="nav-number">1.2.</span> <span class="nav-text">构建生命周期，阶段和目标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BE%9D%E8%B5%96%E5%92%8C%E4%BB%93%E5%BA%93"><span class="nav-number">1.3.</span> <span class="nav-text">依赖和仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E6%8F%92%E4%BB%B6"><span class="nav-number">1.4.</span> <span class="nav-text">构建插件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">1.5.</span> <span class="nav-text">构建配置文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Maven-vs-Ant"><span class="nav-number">2.</span> <span class="nav-text">Maven vs. Ant</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Maven-POM%E6%96%87%E4%BB%B6"><span class="nav-number">3.</span> <span class="nav-text">Maven POM文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B6%85%E7%BA%A7POM"><span class="nav-number">3.1.</span> <span class="nav-text">超级POM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%89%E6%95%88POM"><span class="nav-number">3.2.</span> <span class="nav-text">有效POM</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Maven%E8%AE%BE%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">4.</span> <span class="nav-text">Maven设置文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Maven%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="nav-number">5.</span> <span class="nav-text">Maven目录结构</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BE%9D%E8%B5%96"><span class="nav-number">6.</span> <span class="nav-text">依赖</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%96%E9%83%A8%E4%BE%9D%E8%B5%96"><span class="nav-number">6.1.</span> <span class="nav-text">外部依赖</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BF%AB%E7%85%A7%E4%BE%9D%E8%B5%96"><span class="nav-number">6.2.</span> <span class="nav-text">快照依赖</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Maven%E4%BB%93%E5%BA%93"><span class="nav-number">7.</span> <span class="nav-text">Maven仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93"><span class="nav-number">7.1.</span> <span class="nav-text">本地仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E5%A4%AE%E4%BB%93%E5%BA%93"><span class="nav-number">7.2.</span> <span class="nav-text">中央仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="nav-number">7.3.</span> <span class="nav-text">远程仓库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Maven%E6%9E%84%E5%BB%BA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%8C%E9%98%B6%E6%AE%B5%E5%92%8C%E7%9B%AE%E6%A0%87"><span class="nav-number">8.</span> <span class="nav-text">Maven构建生命周期，阶段和目标</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">8.1.</span> <span class="nav-text">构建生命周期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E9%98%B6%E6%AE%B5"><span class="nav-number">8.2.</span> <span class="nav-text">构建阶段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E7%9B%AE%E6%A0%87"><span class="nav-number">8.3.</span> <span class="nav-text">构建目标</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Maven%E6%9E%84%E5%BB%BA%E9%85%8D%E7%BD%AE"><span class="nav-number">9.</span> <span class="nav-text">Maven构建配置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Maven%E6%8F%92%E4%BB%B6"><span class="nav-number">10.</span> <span class="nav-text">Maven插件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Maven%E5%91%BD%E4%BB%A4"><span class="nav-number">11.</span> <span class="nav-text">Maven命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Maven%E5%91%BD%E4%BB%A4%E7%BB%93%E6%9E%84"><span class="nav-number">11.1.</span> <span class="nav-text">Maven命令结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%8C%E9%98%B6%E6%AE%B5%E5%92%8C%E7%9B%AE%E6%A0%87-1"><span class="nav-number">11.2.</span> <span class="nav-text">构建生命周期，阶段和目标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%8C%E9%98%B6%E6%AE%B5%E5%92%8C%E7%9B%AE%E6%A0%87"><span class="nav-number">11.3.</span> <span class="nav-text">执行生命周期，阶段和目标</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%A7%E8%A1%8CDefault%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">12.</span> <span class="nav-text">执行Default生命周期</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E6%9E%84%E5%BB%BA%E9%98%B6%E6%AE%B5"><span class="nav-number">13.</span> <span class="nav-text">执行构建阶段</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Maven%E5%8E%9F%E5%9E%8B"><span class="nav-number">14.</span> <span class="nav-text">Maven原型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%AF%E7%94%A8%E7%9A%84Maven%E5%8E%9F%E5%9E%8B"><span class="nav-number">14.1.</span> <span class="nav-text">可用的Maven原型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E5%90%8D%E5%8E%9F%E5%9E%8B"><span class="nav-number">14.2.</span> <span class="nav-text">命名原型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Eclipse"><span class="nav-number">14.2.1.</span> <span class="nav-text">Eclipse</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IDEA%E5%8E%9F%E5%9E%8B"><span class="nav-number">14.2.2.</span> <span class="nav-text">IDEA原型</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Maven%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A"><span class="nav-number">15.</span> <span class="nav-text">Maven单元测试报告</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Maven-Surefire%E6%8F%92%E4%BB%B6"><span class="nav-number">15.1.</span> <span class="nav-text">Maven Surefire插件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A"><span class="nav-number">15.2.</span> <span class="nav-text">生成一个单元测试报告</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%B3%E8%BF%87%E6%B5%8B%E8%AF%95"><span class="nav-number">15.3.</span> <span class="nav-text">跳过测试</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">不识</p>
  <div class="site-description" itemprop="description">初心未终，此道可成</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">92</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">不识</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
